# 传感器测试程序集

这个目录包含了用于测试智能小车各种传感器的测试程序。这些测试程序可以帮助您验证传感器的工作状态、调试传感器问题以及校准传感器参数。

## 可用的测试程序

### 1. 超声波传感器测试 (TestUltrasonic.cpp)

测试超声波测距传感器的功能，包括距离测量和障碍物检测。

使用方法：
- 上传程序后打开串口监视器
- 程序会持续显示测量的距离值和障碍物检测状态
- 可用于验证超声波传感器的准确性和响应速度

### 2. 红外线阵列传感器测试 (TestInfrared.cpp)

测试红外线阵列传感器的巡线功能，显示传感器读数和线位置。

使用方法：
- 上传程序后打开串口监视器
- 将小车放在黑线上，观察传感器数值变化
- 程序会显示各传感器的原始值和计算出的线位置

### 3. 颜色传感器测试 (TestColorSensor.cpp)

测试TCS34725颜色传感器的颜色识别功能。

使用方法：
- 上传程序后打开串口监视器
- 将传感器对准不同颜色的物体
- 程序会显示检测到的颜色以及RGB原始值

### 4. 传感器管理器综合测试 (TestSensorManager.cpp)

测试传感器管理器的功能，同时检测所有传感器的工作状态。

使用方法：
- 上传程序后打开串口监视器
- 程序会顺序显示所有传感器的数据
- 可用于验证多个传感器的协同工作情况

### 5. 传感器校准程序 (TestCalibration.cpp)

交互式校准工具，用于校准红外线传感器。

使用方法：
- 上传程序后打开串口监视器
- 按照程序提示进行红外传感器的校准流程
- 会经过传感器稳定等待、I2C校准命令发送、状态监控等步骤
- 校准后可实时监控传感器状态，验证校准效果

### 6. 颜色传感器校准程序 (TestColorCalibration.cpp)

专用于颜色传感器的交互式校准工具。

使用方法：
- 上传程序后打开串口监视器
- 选择校准模式或测试模式
- 校准模式下，依次对红、蓝、黄、白、黑色进行采样校准
- 测试模式下，可实时检测颜色并显示识别结果
- 完成校准后，程序会显示校准的阈值，可复制到代码中使用

### 7. HSV颜色识别测试 (TestColorHSV.cpp)

测试基于HSV颜色空间的颜色识别算法。

使用方法：
- 上传程序后打开串口监视器
- 使用串口命令控制程序：
  - '1' - 切换到颜色检测模式
  - '2' - 切换到颜色校准模式
  - '3' - 切换到原始数据模式
  - 'd' - 执行颜色检测
  - 'c' - 执行颜色校准
  - 'r' - 显示原始数据
  - 'n' - 切换校准目标颜色
  - 'h' - 显示帮助信息
- 颜色检测模式下会同时显示RGB和HSV算法的识别结果对比

### 8. 路口检测测试 (TestMultipleJunctionDetection.cpp)

测试使用红外阵列传感器检测各种类型的路口。

使用方法：
- 上传程序后打开串口监视器
- 将小车放在不同路口类型（T型、十字、左右转等）上
- 程序会显示传感器状态、检测到的路口类型和路口计数
- 可用于开发和调试路口识别算法

## 如何运行测试

1. 在PlatformIO中，修改platformio.ini文件中的`src_filter`参数，选择要测试的程序
   ```
   src_filter = +<Test/TestUltrasonic.cpp> -<main.cpp>
   ```

2. 或者使用Arduino IDE时，打开相应测试文件并上传到开发板

3. 上传完成后，打开串口监视器（波特率：9600）观察输出

4. 按照每个测试程序的说明进行操作

## 注意事项

- 进行测试前，请确保相应的传感器已正确连接，并检查引脚定义是否与Config.h中的定义一致
- 颜色传感器校准时需要在稳定的光照条件下进行
- 红外线传感器校准需要使用实际将要使用的黑线和背景表面
- HSV色彩空间识别算法相比RGB算法，对光照条件变化更具鲁棒性
- 路口检测时，需要合适的路口样本以确保准确识别
- 校准完成后，应将获得的阈值参数更新到相应的传感器源代码中 