# 传感器测试程序集

这个目录包含了用于测试智能小车各种传感器的测试程序。这些测试程序可以帮助您验证传感器的工作状态、调试传感器问题以及校准传感器参数。

## 可用的测试程序

### 1. 超声波传感器测试 (TestUltrasonic.cpp)

测试超声波测距传感器的功能，包括距离测量和障碍物检测。

使用方法：
- 上传程序后打开串口监视器
- 程序会持续显示测量的距离值和障碍物检测状态
- 可用于验证超声波传感器的准确性和响应速度

### 2. 红外线阵列传感器测试 (TestInfrared.cpp)

测试红外线阵列传感器的巡线功能，显示传感器读数和线位置。

使用方法：
- 上传程序后打开串口监视器
- 将小车放在黑线上，观察传感器数值变化
- 程序会显示各传感器的原始值和计算出的线位置

### 3. 颜色传感器测试 (TestColorSensor.cpp)

测试TCS34725颜色传感器的颜色识别功能。

使用方法：
- 上传程序后打开串口监视器
- 将传感器对准不同颜色的物体
- 程序会显示检测到的颜色以及RGB原始值

### 4. 传感器管理器综合测试 (TestSensorManager.cpp)

测试传感器管理器的功能，同时检测所有传感器的工作状态。

使用方法：
- 上传程序后打开串口监视器
- 程序会顺序显示所有传感器的数据
- 可用于验证多个传感器的协同工作情况

### 5. 传感器校准程序 (TestCalibration.cpp)

交互式校准工具，用于校准颜色传感器和红外线传感器。

使用方法：
- 上传程序后打开串口监视器
- 按照程序提示选择要校准的传感器
- 对于颜色传感器：将传感器放在各种颜色上采样
- 对于红外传感器：分别在黑线和白色背景上采样
- 记录校准值，并据此修改相应传感器的阈值参数

## 如何运行测试

1. 在PlatformIO中，修改platformio.ini文件中的`src_filter`参数，选择要测试的程序
   ```
   src_filter = +<Test/TestUltrasonic.cpp> -<main.cpp>
   ```

2. 或者使用Arduino IDE时，打开相应测试文件并上传到开发板

3. 上传完成后，打开串口监视器（波特率：9600）观察输出

4. 按照每个测试程序的说明进行操作

## 注意事项

- 进行测试前，请确保相应的传感器已正确连接，并检查引脚定义是否与Config.h中的定义一致
- 颜色传感器校准时需要在稳定的光照条件下进行
- 红外线传感器校准需要使用实际将要使用的黑线和背景表面
- 校准完成后，应将获得的阈值参数更新到相应的传感器源代码中 